# 源水

提供志愿服务签到打卡，水源信息展示，活动申请等的综合平台app

功能介绍：像是首页，有一个图片banner会展示我们的一些活动主题，中间选项卡提供一些小的功能，比如水源信息，（偷懒直接放的湖南水务的数据）降水情况页面等还有一个志愿积分换取周边物品的功能，但是没时间写了。下面推文栏就是同步我们微信公众号的推文。还有动态页就是发送动态打卡，还有就是活动页，展示我们的一些线下参与的活动，点进去查看详情，有具体的开展时间要求等，可以点击申请，填写相关数据提交。另外就是个人中心，展示自己的一些相关信息志愿服务信息。

变现是一个大问题，毕竟我们提供志愿服务，但是一些活动开展依然需要资金支撑，我们并没有很多吸纳资金的手段。像是之前做数据调查的时候看到的一个给官方提供app制作的公司自己硬是贴上了两百万的运营成本，想不到好的方式去盈利。

这玩意是赶进度写的，当时我刚好看到有一个备战省赛的招募，想着自己学过一点安卓开发就去联系他们了。而且他们之前设计的都是一些app的概念功能和设计图片，并没有实体，而且距离校内的内部筛选只有两周的时间了。我也是咬牙接受了，他们说只要做出基本界面就行。但是我也在拼命赶进度，有一次那个上传功能接口出问题了，硬是从晚上11点改到的第二天的4点多才去睡觉。总的来说时间非常赶，而且也意识到自己对于这些知识的不够熟练，包括前端app界面，还有后端功能交互都是我自己一个人写。所以写得还是比较草率，很多地方写了todo，但是我还是先写好大体框架，然后再去写这些细节。当时真的白天上课走路都在思考怎么实现这个功能。其实还有一些问题也没有考虑到

Intent传递数据，从不同activity

一个activity用了四个fragment

- 发送动态打卡功能

编辑动态，像一般有标题，正文，还有一个就是选择对应的参加的活动标签，这个存在数据库里。

还必须上传打卡图片，（其实还写了打开相机或者相册，安卓版本适配是个巨大问题，当时肯定没有工夫，只考虑了比较新的安卓版本）首先有请求访问图片授权，因为涉及到隐私读取，调用系统相册，通过回调获得相册的uri，通过uri再获得path图片的绝对路径，再包装成File对象，就可以获取图片信息和文件大小，对图片进行检测，如果超过大小会提醒。当时用的是一个开放的图床，上传成功后返回图片url，先让图片回显，只有点击发送博客，才上传图片。当时有想过能上传多个图片，但是不太会写，时间紧就先搁置了。

这里上传使用的是OKhttp自己然后写了一个工具类，它上传成功后会调用回调接口onResponse，然后从response解析到图片链接。上传进度没做，但是我知道这个经典做法是假的进度条到99%卡住，等待后端上传成功的响应，这样也可以减少一定的不必要的。当然okhttp也是提供了监听上传进度的方法。这个没有太去深究了。

下拉刷新，为了防止反复重复拉取

- 注册账号登录功能

注册，当时直接用的手机号做账号，想起来当时连注册验证码都忘了做了，只是有一些手机号长度校验，密码长度校验什么的，然后初始化用户，上传用户图像，还有设置昵称等一些基本数据。

登录，就是后端简单做了一个验证，登录成功后像记住我功能就保存个人信息在本地的sqllite就行，在activity的生命周期onResume,onCreate等执不同操作

第三方组件glide加载图片，他会自动缓存图片到本地
